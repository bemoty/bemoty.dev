{{ define "main" }}
    <main class="page" id="main-content">
        <article>
            <header>
                {{ with .Params.images }}
                    {{ with index . 0 }}
                        {{ $imgPath := .src }}
                        {{ $img := resources.Get (strings.TrimPrefix "/" $imgPath) }}
                        {{ if $img }}
                            <div class="article-image">
                                <img src="{{ $img.RelPermalink }}"
                                     alt="{{ .caption | default .src }}"
                                     width="{{ $img.Width }}"
                                     height="{{ $img.Height }}"
                                     loading="lazy"/>
                            </div>
                            {{ with .caption }}
                                <p class="muted">— {{ . }}</p>
                            {{ end }}
                        {{ else }}
                            <div class="article-image">
                                <img src="{{ .src }}" alt="{{ .caption | default .src }}" loading="lazy"/>
                            </div>
                            {{ with .caption }}
                                <p class="muted">— {{ . }}</p>
                            {{ end }}
                        {{ end }}
                    {{ end }}
                {{ end }}

                <h1>{{ .Title }}</h1>

                <div class="article-meta">
                    {{ if .Page.Date }}
                        <time datetime="{{ .Page.Date.Format "2006-01-02" }}" class="posted">
                            {{ .Page.Date.Format "2006-01-02" }}
                        </time>
                    {{ end }}

                    {{ with .Params.tags }}
                        <div class="article-tags">
                            {{ range . }}
                                <a href="{{ "tags" | absURL }}/{{ . | urlize }}" class="tag">
                                    #{{ . }}
                                </a>
                            {{ end }}
                        </div>
                    {{ end }}
                </div>
            </header>

            {{ .Content }}
        </article>
    </main>
{{ end }}
