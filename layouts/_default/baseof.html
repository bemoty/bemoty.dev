<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en-us" }}">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>
        {{ if eq .Kind "404" }}
            Not found — bemoty.dev
        {{ else }}
            {{ .Title }} — bemoty.dev
        {{ end }}
    </title>
	{{ with .Site.Params.Description }}<meta name="description" content="{{ . }}">{{ end }}
	{{ with .Site.Params.author }}<meta name="author" content="{{ . }}">{{ end }}

    <meta property="og:site_name" content="{{ .Site.Title }}">
    <meta property="og:title" content="{{ .Title }}">
    <meta property="og:url" content="{{ .Permalink }}">

    {{ if eq .Kind "page" }}
    <meta property="og:type" content="article">
    {{ else }}
    <meta property="og:type" content="website">
    {{ end }}

    {{ with .Description }}
    <meta property="og:description" content="{{ . }}">
    <meta name="twitter:description" content="{{ . }}">
    {{ else }}
    <meta property="og:description" content="{{ with .Summary }}{{ . | plainify }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <meta name="twitter:description" content="{{ with .Summary }}{{ . | plainify }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    {{ end }}

    <link rel="canonical" href="{{ .Permalink }}">

    {{ if .Params.images }}
        {{ range first 1 .Params.images }}
            {{ if reflect.IsMap . }}
                <meta property="og:image" content="{{ .src | absURL }}">
                <meta property="twitter:image" content="{{ .src | absURL }}">
                {{ with .alt }}<meta property="og:image:alt" content="{{ . }}">{{ end }}
            {{ else }}
                <meta property="og:image" content="{{ . | absURL }}">
                <meta property="twitter:image" content="{{ . | absURL }}">
            {{ end }}
        {{ end }}
    {{ else if .Site.Params.images }}
        <meta property="og:image" content="{{ index .Site.Params.images 0 | absURL }}">
        <meta property="twitter:image" content="{{ index .Site.Params.images 0 | absURL }}">
    {{ else }}
        <meta property="og:image" content="{{ "/img/social-card.webp" | absURL }}">
        <meta property="twitter:image" content="{{ "/img/social-card.webp" | absURL }}">
    {{ end }}

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ .Title }}">
    {{ with .Site.Params.social.twitter }}
    <meta name="twitter:site" content="@{{ . }}">
    {{ end }}

    {{ if eq .Type "blog" }}
    <meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
    {{ with .Lastmod }}<meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
    <meta property="article:author" content="{{ .Site.Params.author }}">
    {{ with .Params.tags }}
        {{ range . }}
        <meta property="article:tag" content="{{ . }}">
        {{ end }}
    {{ end }}
    {{ end }}

    {{ with .OutputFormats.Get "rss" -}}
        {{ printf `<link rel=%q type=%q href=%q title=%q>` .Rel .MediaType.Type .Permalink site.Title | safeHTML }}
    {{ end }}
	<link rel="preload" href="{{ "font/JetBrainsMono-Regular.ttf" | relURL }}" as="font" type="font/ttf" crossorigin>
	{{ $fontCss := resources.Get "style/font.css" | minify }}
	<link rel="stylesheet" href="{{ $fontCss.RelPermalink }}">
	{{ $mainCss := resources.Get "style/main.css" | minify }}
    <link rel="stylesheet" href="{{ $mainCss.RelPermalink }}">

    {{ if .IsHome }}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Joshua Winkler",
      "url": "https://bemoty.dev",
      "jobTitle": "Software Developer",
      "sameAs": [
        "https://github.com/bemoty",
        "https://www.linkedin.com/in/joshua-winkler/",
        "https://bsky.app/profile/bemoty.dev"
      ]
    }
    </script>
    {{ end }}

    {{ if and (eq .Kind "page") (eq .Type "blog") }}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "{{ .Title }}",
      "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
      {{ with .Lastmod }}"dateModified": "{{ .Format "2006-01-02T15:04:05Z07:00" }}",{{ end }}
      "author": {
        "@type": "Person",
        "name": "{{ .Site.Params.author }}"
      },
      {{ with .Description }}"description": "{{ . }}",{{ end }}
      {{ with .Params.images }}
        {{ with index . 0 }}
      "image": "{{ .src | absURL }}",
        {{ end }}
      {{ end }}
      "publisher": {
        "@type": "Person",
        "name": "{{ .Site.Params.author }}"
      }
    }
    </script>
    {{ end }}
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="wrapper">
        {{ partial "header" . }}
        {{ block "main" . }}
            <!-- slot -->
        {{ end }}
        {{ partial "footer" . }}
    </div>
</body>
</html>